# OPC 、OPC DA、OPC UA介绍

https://blog.csdn.net/xiaochenXIHUA/article/details/116948226#t11

------

# 一、OPC介绍

## 1、OPC是什么？

 OPC是OLE for ProcessControl的缩写，即应用于过程控制，**OPC就是基于COM/DCOM的数据访问的标准**；

## 2、OPC的本质

 **OPC规范包括OPC服务器和OPC客户端两个部分**。**其本质是在硬件供应商和软件开发商之间建立一套完整的“规则**”。

## 3、OPC诞生背景

 **①OPC是在1996年前后，由几大自动化供应商组成一个工作组，负责开发基于COM和DCOM的数据访问标准，称之为OPC**。这个事，和微软有关系。因为在90年代，微软的操作系统开始占据市场，并且自动化供应商也没有更好地选择。在微软推出COM和DCOM技术之后，自动化供应商在产品中开始使用这个技术。怎么说呢，因为可能在当时，没有比这更好的选择了。 

 **②但是呢，每家自动化用法不一样，有时候在一个项目或者软件里，不可能只使用一家供应商或一种设备的**。为了解决这个问题，几大自动化公司就站出来说，我们来搞一套标准的吧，为了工业，为了未来。于是他们把这一套标准就称之为OPC了。96年左右。也就是Windons 95 刚出来。那时候互联网还没有发展起来，更别说物联网了。

 **③在自动化行业，还是有数据采集需求，那采集的数据去哪里呢，就要去到上位机系统，上位机也就是Windows了**，要知道那时候Windows的市场占有率多可怕。也就是**在同一台电脑，又要进行数据采集，又要进行数据显示，又要应用在现场，这种电脑，很多时候往往就是工控机的角色了。**

 **④而电脑采集数据，无非就是通过串口，以太网，或者就是板卡集成到PC主机数据采集。**这就为难了那个做纯软件开发，他们做的是UI的软件，也就是类似组态王之类的界面显示系统，但是每家的数据采集都不一样，没有个标准和统一，也可以理解为硬件商提供的数据采集都不一样。

 ⑤也就是**硬件厂商A把数据采集做好了，同时软件客户B把UI软件设计出来了**，但是**中间缺乏一个桥梁**。UI调用数据，查阅和管理数据，按理说是可以用数据库的。**在当时，可能COM和DCOM技术比使用数据库更为方便**，以及更为开发者接受。所以自动化更倾向于使用COM和DCOM技术。也就是**自动化供应商采集数据，封装成COM组件或服务。做UI系统的，比如组态王之类的，只需要调用COM组件或服务，就完美解决之前的数据对接桥梁问题。**
 

# 二、OPC DA介绍

## 1、OPC DA是什么？

  这个D【就是Data】，这个A【就是Access】，**OPC DA就是基于OPC标准的数据访问**。

## 2、OPC DA的本质

 ①**OPC数据采集端，通过串口，以太网，板卡，采集到的数据，作为OPC服务端**，以便OPC客户端来进行访问；

 ②**这里的客户端和服务端，并不是我们所说的TCP/IP里的客户端和服务器**。在同一台电脑里，应用程序访问数据，是通过DOM技术来访问的。再通俗一点，比如A程序把采集到的数据写到一个指定文件里。然后B程序到指定的文件读取数据并显示出来的。**所以OPCDA的数据采集，客户端和服务端的角色就是类似于A程序和B程序的角色一样**。所以，我们目前见到的OPCDA数据采集，都是在同一台电脑里发生的。

 ③OPCDA不是协议。虽说**OPC是一个标准**，但是这个标准并不是指某个通信协议标准，而**是指某种技术的使用标准和规范**。

##  3、OPC DA的远程通讯

 ①既然OPCDA不是协议，更不是某种TCP协议，那是不是就意味着OPCDA不能在两台电脑之间访问呢？

 ②也不是的。在Windows里，就存在一种两台电脑之间通信的机制或协议。叫RPC，也就是远程过程调用。简单地说，OPC DA呢，好比如电脑上的某个资源或文件之类的，而Windows的RPC，就是为了让两台电脑可以互相访问资源的。OPCDA的技术是COM技术，所以有些远程访问OPC，也看到描述为OPC COM之类的。

 ③像这种还是基于PC到PC的。也就是纯OPCDA，如果想要支持远程访问，那就必须配置支持RPC服务等。实际上还是借助了RPC通道或服务来间接使用OPCDA的访问。而且这种应用呢，也局限于在Windows的使用。

 

# 三、OPC UA介绍

## 1、OPC UA是什么？

 OPC UA（OPC Unified Architecture）是**指OPC统一体系架构，是一种基于服务的、跨越平台的解决方案**。

## 2、OPC UA的本质

 ①**OPC UA除了约定了数据等定义规范，同时还支持了TCP/IP协议**。使得远程访问不再局限于使用RPC技术。

 ②**OPC UA支持跨平台，跨系统，可以在各平台，各系统进行数据通信访问**。

 ③**OPC UA的数据结构，存储，映射等，不再使用COM/DCOM技术，就意味着不再限制于Windows了**。

 ④信息加密，互访认证以及安全监听功能。

 ⑤丰富的信息建模：可定义复杂的信息，而不再是单一的数据。

## 3、OPC UA特点

 ①**扩展了OPC的应用平台**。传统的基于COM/DCOM 的OPC技术只能基于Windows操作系统，OPC UA支持拓展到Linux和Unix平台。这使得基于OPC UA的标准产品可以更好地实现工厂级的数据采集和管理；

 ②不再基于DCOM通讯，不需要进行DCOM安全设置；

 ③**OPC UA定义了统一数据和服务模型，使数据组织更为灵活**，可以实现报警与事件、数据存取、历史数据存取、控制命令、复杂数据的交互通信；

 ④ **OPC UA比OPC DA更安全**。OPC UA传递的数据是可以加密的，并对通信连接和数据本身都可以实现安全控制。新的安全模型保证了数据从原始设备到MES,ERP系统,从本地到远程的各级自动化和信息化系统的可靠传递；

 ⑤**OPC UA可以穿越防火墙，实现Internet 通讯**。

 
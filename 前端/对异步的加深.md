## await Promise.all([a(), a()]);





将原有的代码改为并列执行可以通过使用`Promise.all`方法来实现。以下是修改后的代码：

```
javascriptCopy Codefunction a() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve(123);
        }, 10000);
    });
}

async function bb() {
    let [b, c] = await Promise.all([a(), a()]);
    console.log(b);
    console.log(c);
}

bb();
```

这样修改后，函数`a()`会同时执行两次，而不是等待第一个`await`完成后才执行第二个`await`。`Promise.all`方法用于并行执行多个异步操作，并且返回一个包含所有操作结果的数组，可以将多个`await`语句合并为一个`Promise.all`调用，以提高执行效率。结果数组中的元素顺序与传入`Promise.all`的顺序一致。



![img](https://c.binjie.fun/assets/avatar-ceeb03f6.jpg)

2023/9/18 09:25:54

await Promise.all，是不是返回每个异步函数的结果，返回的类型是数组还是对象





2023/9/18 09:26:04

`await Promise.all`返回的是一个包含所有异步函数结果的数组。

`Promise.all`方法接收一个由 Promise 对象组成的可迭代对象（比如数组），并返回一个新的 Promise 对象。这个新的 Promise 对象在所有传入的 Promise 都解决（resolved）后解决，并将每个 Promise 的结果按照它们在原始可迭代对象中的顺序组成一个数组。

所以，当使用`await Promise.all([a(), b(), c()])`时，返回的结果是一个按照 `[a(), b(), c()]`中 Promise 执行完成的顺序构成的数组。可以通过数组索引来获取每个异步函数的结果。

例如，如果`[a(), b(), c()]`执行完成的顺序是 `c(), a(), b()`，那么返回的数组就是 `[c的结果, a的结果, b的结果]`。

需要注意的是，数组中的元素顺序与传入`Promise.all`的顺序是一致的，即使某个异步操作先完成了，它的结果也会在结果数组中对应的位置上。